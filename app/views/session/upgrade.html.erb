<h1 class="text-center">Request to Upgrade your account</h1>

<nav class="navbar navbar-dark bg-dark nav-fill nav-justified">
    
   <span class="navbar-brand" style="color:rgb(255, 165, 0)">Comic Commit</span>
   <a class="nav-link" href="profile">Profile</a>
   <a class="nav-link" href="#">Discover</a>
   <a class="nav-link" href="#">Review</a>
   <a class="nav-link" href="#">Forum</a>
   <form class="form-inline">
      <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
   </form>
   
   <div class="dropdown">
      <a class="nav-link dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <%= current_user.username %>
      </a>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
      <% if current_user.group=='admin' %>
         <a class="dropdown-item" href="promote">Requests</a>
      <% elsif current_user.group=='creator' %>
         <a class="dropdown-item" href="comic">Comic</a>
      <% elsif current_user.group=='critic' %>
         <a class="dropdown-item" href="#">Review</a>
      <% else %>  
         <a class="dropdown-item" href="upgrade">Upgrade</a>
      <% end %>
      <a class="dropdown-item" href="setting">Setting</a>
      </div>
   </div>
   
   <%= button_to "Logout", destroy_path, {class:'btn btn-danger'}  %>
</nav>

<div class="container">
   <div class="row justify-content-center">
      <%= form_with model: request, url: new_request_path, method: :post, local: true, scope: :request do |form| %>
    
         <% invalid = request.errors.include?(:acc_type) %>
         <div class="text-center <%= 'has-danger' if invalid %>">
            <p>What type of account you are requesting?</p>
            <%= form.radio_button :acc_type, 'creator' %>
            <%= form.label :type_creator, "Creator" %>
            <%= form.radio_button :acc_type, 'critic' %>
            <%= form.label :type_critic, "Critic" %>
            <%= form.radio_button :acc_type, 'admin' %>
            <%= form.label :type_admin, "Admin" %>
            <% if invalid %>
               <div class="small">
                  <% request.errors.full_messages_for(:acc_type).each do |error_message|%>
                     <%= error_message %>
                  <% end %>
               </div>
            <% end %>
         </div> 

         <% invalid = request.errors.include?(:reason) %>
         <div class="form-group">  
            <p class="text-center"><%= form.label :reason %></p>
            <%= form.text_area :reason, size: '60x5', class: "form-control #{'border-danger' if invalid}" %>
            <% if invalid %>
               <div class="small">
                  <% request.errors.full_messages_for(:reason).each do |error_message|%>
                     <%= error_message %>
                  <% end %>
               </div>
            <% end %>
         </div>

         <div class="text-center">
            <%= form.submit "Request" %><br>
         </div>

      <% end %>
   </div>
</div>
